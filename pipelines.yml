##### JFrog - Ran Cli Pipeline #####

resources:
# Application source repository
  - name: ran-cli
    type: GitRepo
    configuration:
      gitProvider: MyGithub
      path: Ransela17/ran-cli                
      branches:
        include: master
      buildOn:
        commit: true

# Configutaion source repository
  - name: pipeline_config
    type: GitRepo
    configuration:
      gitProvider: MyGithub
      path: Ransela17/pipelines_config                 
      branches:
        include: master

# New image location and source
  - name: ran_new_image
    type: Image
    configuration:
      registry: MyArtifactory                             
      sourceRepository: ran-cli            
      imageName: pe16510rans.jfrog.io/artifactory/ran-cli/ran-cli/ 
      imageTag: ${run_number}
      autoPull: true

# Bulid image by Docker
  - name: cli_build
    type: BuildInfo
    configuration:
      sourceArtifactory: MyArtifactory

##### JFrog Pipeline Steps #####

pipelines:
  - name: demo_pipeline
    steps:
      - name: demo_step_1
        type: BuildInfo
        configuration:
          #affinityGroup: dbp_group
          dockerFileLocation: .
          dockerFileName: Dockerfile
          dockerImageName: pe16510rans.jfrog.io/artifactory/ran-cli/ran-cli  # replace with your image path and name
          dockerImageTag: ${run_number}
          inputResources:
            - name: pipeline_config
          integrations:
            - name: ran_new_image
          #excution:




      # - name: xray
      #   type: XrayScan
      #   configuration:
      #     affinityGroup: "name"
      #     inputResources:
      #       - name: cli_build